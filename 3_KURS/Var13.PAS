Program var13;
uses crt;
{Делаем методом средних прямоугольников
Суть метода:
Опред. шаг dx=(a-b)/n,a и b -пределы интегрирования,
n- кол-во разбиений;
проводим линии в точках разбиения;
строим на этих линиях прямоугольники, используя линии
как стороны.Если при этом прямоугольник рисовать
вправо от пересечения линии и прямой - метод
левых прямоугольников(хотя слева не прямоуг.,а линия)
если влево - то правых прямоугольников (парадокс)
если по центру - то средних

Теперь алглритм вычисления с заданной погрешностью:
1.выбираем начальное число разбиений nn;
2.вычисляем значение итеграла для этого шага;
3.уменьшаем шаг в два раза;
4.вычисляем новое значение интеграла(I), предварительно
сохранив старое для сравнения(I1);
5.вычисляем погрешность E=|I=I1| (в смысле модуль разности);
Если погрешность болше заданой, повторяем с пункта 3,
если меньше - берем последнее посчитанное значение интеграла
и говорим, что усё у порядке.
}
const PI=3.141593;
      a=PI/2;
      b=3*PI/2;
var nn,n:integer;
    x,I,I1,e,dx:real;
begin
  clrscr;
  nn:=16; {начальное число разбиений}
  repeat
    dx:=(b-a)/nn;
    I1:=I;
    I:=0;
    for n:=1 to nn do
      begin
        x:=a+dx*(n-0.5);
        I:=I+dx*(cos(21*PI*x)/(sin(21*PI*x)+exp(x)));
      end;
    e:=abs(I-I1);
    nn:=nn*2;
  until e>0.00001;
  writeln('Значение интеграла  ',I:7:5);
  readln;
end.