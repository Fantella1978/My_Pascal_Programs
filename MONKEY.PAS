program graph4;
uses graph,crt;
var
 grDriver,grMode,errCode,a,b:integer;
 c:char;
procedure rmonl2(x,y:word);
 var
  xc,yc,xm,ym,x1,y1,y2,x2:word;
  radius,xradius,yradius,rc:word;
  karc:arccoordstype;
 begin
  y1:=y-10;
  x1:=x-10;
  x2:=x+20;
  radius:=10;
  setcolor(brown);
  setfillstyle(solidfill,brown);
  pieslice(x1,y1,0,360,radius);
  pieslice(x2,y1,0,360,radius);
  radius:=radius-3;
  setcolor(lightred);
  setfillstyle(solidfill,lightred);
  pieslice(x1,y1,0,360,radius);
  pieslice(x2,y1,0,360,radius);
  radius:=(x2-x1)div 2-3;
  x1:=x1+radius+2;
  y1:=y1+2;
  xc:=x1;
  yc:=y1;
  setcolor(brown);
  setfillstyle(solidfill,brown);
  pieslice(x1,y1,0,360,radius);
  setcolor(brown);
  setfillstyle(solidfill,yellow);
  y2:=y1+radius-3;
  x1:=x1-radius div 2+2;
  ym:=y2;
  line(x1,y2,x1-7,y2+18);
  x2:=x1+radius-4;
  xm:=x2;
  line(x2,y2,x2+7,y2+18);
  line(x1-7,y2+18,x2+7,y2+18);
  putpixel(x2-2,y2+5,blue);
  floodfill(x2-2,y2+5,brown);
  x1:=x1-7;
  x2:=x2+7;
  y1:=y2+16;
  setcolor(green);
  setfillstyle(solidfill,green);
  bar(x1,y1,x2,y1+2);
  setcolor(blue);
  setfillstyle(solidfill,blue);
  y1:=y1+3;
  line(x1,y1,x2,y1);
  line(x1,y1,x1+13,y1+8);
  line(x2,y1,x2+2,y1+8);
  line(x1+13,y1+8,x2+2,y1+8);
  floodfill(x1+9,y1+1,blue);
  line(x1,y1,x1+2,y1+8);
  line(x1+2,y1+8,x1+9,y1+8);
  line(x1+9,y1+8,x1+14,y1+5);
  floodfill(x1+4,y1+7,blue);
  setcolor(black);
  line(x1,y1,x1+13,y1+8);
  x2:=x2+4;
  y1:=y1+8;
  setcolor(brown);
  line(x2-4,y1,x2-2,y1+4);
  line(x2-2,y1+4,x2-6,y1+9);
  line(x2-6,y1+9,x2-10,y1+9);
  line(x2-10,y1+9,x2-6,y1+4);
  line(x2-6,y1+4,x2-8,y1);
  line(x2-8,y1,x2-2,y1);
  setfillstyle(solidfill,brown);
  floodfill(x2-5,y1+1,brown);
  setcolor(blue);
  setfillstyle(solidfill,blue);
  x2:=x2-5;
  y2:=y1+11;
  xradius:=7;
  yradius:=2;
  fillellipse(x2,y2,xradius,yradius);
  setcolor(yellow);
  setfillstyle(solidfill,yellow);
  xradius:=xradius-3;
  fillellipse(x2+3,y2-1,xradius,yradius);
  x1:=x1+7;
  setcolor(brown);
  line(x1,y1,x1+2,y1+4);
  line(x1+2,y1+4,x1-2,y1+9);
  line(x1-2,y1+9,x1-6,y1+9);
  line(x1-6,y1+9,x1-2,y1+4);
  line(x1-2,y1+4,x1-4,y1);
  line(x1-4,y1,x1,y1);
  setfillstyle(solidfill,brown);
  floodfill(x1,y1+1,brown);
  setcolor(blue);
  setfillstyle(solidfill,blue);
  x2:=x1;
  y2:=y1+11;
  xradius:=7;
  yradius:=2;
  fillellipse(x2,y2,xradius,yradius);
  setcolor(yellow);
  setfillstyle(solidfill,yellow);
  xradius:=xradius-3;
  fillellipse(x2+3,y2-1,xradius,yradius);
  setcolor(brown);
  y1:=ym+5;
  x1:=xm+2;
  line(x1,y1,x1+28,y1+6);
  line(x1-1,y1+3,x1+29,y1+9);
  x2:=x1+28;
  y2:=y1+7;
  setfillstyle(solidfill,brown);
  pieslice(x2,y2,0,360,4);
  floodfill(x1+2,y1+1,brown);
  setcolor(lightmagenta);
  setfillstyle(solidfill,magenta);
  x1:=x2+3;
  y1:=y2+5;
  xradius:=22;
  yradius:=3;
  fillellipse(x1,y1,xradius,yradius);
  x1:=x1-xradius;
  x2:=x2+radius*2;
  line(x1,y1,x1+7,y1+15);
  line(x1+7,y1+15,x2-7,y1+15);
  line(x2-7,y1+15,x2,y1);
  setfillstyle(solidfill,lightmagenta);
  floodfill(x1+10,y1+14,lightmagenta);
  x1:=xm-8;
  y1:=ym+5;
  setcolor(brown);
  line(x1,y1,x1+10,y1+5);
  line(x1+10,y1+5,x1+26,y1+11);
  line(x1,y1,x1,y1+3);
  line(x1,y1+3,x1+10,y1+8);
  line(x1+10,y1+8,x1+26,y1+14);
  x2:=x1+25;
  y2:=y1+12;
  setfillstyle(solidfill,brown);
  pieslice(x2,y2,0,360,4);
  floodfill(x1+10,y1+6,brown);
  floodfill(x1+14,y1+8,brown);
  setcolor(white);
  setfillstyle(solidfill,white);
  x1:=xc-6;
  x2:=xc+4;
  y1:=yc-2;
  xradius:=2;
  yradius:=3;
  fillellipse(x1,y1,xradius,yradius);
  fillellipse(x2,y1,xradius,yradius);
  xradius:=1;
  yradius:=2;
  setcolor(blue);
  setfillstyle(solidfill,blue);
  x1:=x1+1;
  y1:=y1-1;
  x2:=x2+1;
  fillellipse(x1,y1,xradius,yradius);
  fillellipse(x2,y1,xradius,yradius);
  x1:=xc+rc div 2-4;
  y1:=yc+rc div 2;
  xradius:=10;
  yradius:=4;
  setcolor(lightred);
  setfillstyle(solidfill,lightred);
  fillellipse(x1,y1,xradius,yradius);
  setcolor(red);
  setfillstyle(solidfill,red);
  pieslice(x+6,y,0,360,3);
  setcolor(blue);
  setfillstyle(solidfill,blue);
  x1:=x+6;
  y1:=y+4;
  line(x1,y1,x1-6,y1-4);
  line(x1,y1,x1-6,y1+4);
  line(x1-6,y1-4,x1-6,y1+4);
  floodfill(x1-5,y1,blue);
  line(x1,y1,x1+6,y1-4);
  line(x1,y1,x1+6,y1+4);
  line(x1+6,y1-4,x1+6,y1+4);
  floodfill(x1+5,y1,blue);
  end;
begin
 textcolor(lightred);
 textcolor(green);
 writeln('Press :');
 textcolor(lightblue);
 writeln('        K for left');
 writeln('        L for right');
 writeln('        A for up');
 writeln('        Z for down');
 textcolor(lightred);
 writeln('        Q for exit');
 textcolor(brown);
 writeln;
 writeln('PRESS  S  FOR START');
 repeat delay(1);
 until readkey='s';
 grDriver:=Detect;
 Initgraph(grDriver,grMode,'');
 errCode:=Graphresult;
 if errCode=grOk then
  begin
   a:=150;
   b:=150;
   repeat
   c:=readkey;
   if c='l' then a:=a+3;
   if a>getmaxx then a:=getmaxx;
   if c='k' then a:=a-3;
   if a<10 then a:=10;
   if c='z' then b:=b+3;
   if b>getmaxy then b:=getmaxy;
   if c='a' then b:=b-3;
   if b<0 then b:=0;
   cleardevice;
   rmonl2(a,b);
   delay(4);
   until c='q';
   closegraph;
  end
  else writeln('Error :',Grapherrormsg(errCode));
end.
